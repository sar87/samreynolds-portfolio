---
phase: 13-content-sync
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/content.ts
  - src/pages/DetailPage.module.css
  - src/pages/MediaDetail.ts
  - data/media.json
autonomous: true

must_haves:
  truths:
    - "Media section shows CIEEM podcast, COP30 video, Wildscreen panel, Cambridge feature"
    - "Videos and podcasts play directly on the page via embedded players"
    - "Embeds are responsive (16:9 aspect ratio, full width)"
    - "Items appear in reverse chronological order"
  artifacts:
    - path: "src/types/content.ts"
      provides: "MediaItem type with embedUrl field"
      contains: "embedUrl?: string"
    - path: "src/pages/DetailPage.module.css"
      provides: "Responsive embed container styles"
      contains: "embedContainer"
    - path: "src/pages/MediaDetail.ts"
      provides: "Iframe rendering for embedded media"
      contains: "iframe"
    - path: "data/media.json"
      provides: "4 media items from samreynolds.org"
      contains: "CIEEM"
  key_links:
    - from: "src/pages/MediaDetail.ts"
      to: "data/media.json"
      via: "getMediaById() fetches embedUrl"
      pattern: "media\\.embedUrl"
    - from: "src/pages/MediaDetail.ts"
      to: "src/pages/DetailPage.module.css"
      via: "styles.embedContainer class"
      pattern: "styles\\.embedContainer"
---

<objective>
Update media data and add embedded player support for videos/podcasts

Purpose: Enable CIEEM podcast and COP30 video to play directly on the page
Output: Updated media.json with 4 items, MediaDetail component rendering iframes
</objective>

<execution_context>
@/home/sam/.claude/get-shit-done/workflows/execute-plan.md
@/home/sam/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/13-content-sync/13-CONTEXT.md
@.planning/phases/13-content-sync/13-RESEARCH.md
@src/types/content.ts
@src/pages/MediaDetail.ts
@src/pages/DetailPage.module.css
@data/media.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add embedUrl field to MediaItem type</name>
  <files>src/types/content.ts</files>
  <action>
Add optional embedUrl field to the MediaItem interface:

```typescript
export interface MediaItem {
  id: string;
  type: MediaType;
  title: string;
  venue: string;
  date: string;
  link?: string;
  description?: string;
  embedUrl?: string;  // ADD THIS: For inline iframe embedding (YouTube, Spotify)
}
```

This field will hold embed URLs like:
- YouTube: https://www.youtube.com/embed/{video-id}
- Spotify: https://open.spotify.com/embed/episode/{episode-id}
  </action>
  <verify>
Run: `npx tsc --noEmit`
Expected: No type errors
  </verify>
  <done>MediaItem interface includes optional embedUrl: string field</done>
</task>

<task type="auto">
  <name>Task 2: Add responsive embed CSS and update MediaDetail component</name>
  <files>src/pages/DetailPage.module.css, src/pages/MediaDetail.ts</files>
  <action>
**Part A: Add embed container styles to DetailPage.module.css**

Add after .description section:

```css
/* Embedded media container (YouTube, Spotify) */
.embedContainer {
  position: relative;
  width: 100%;
  padding-bottom: 56.25%; /* 16:9 aspect ratio */
  height: 0;
  overflow: hidden;
  border-radius: var(--radius-md);
  background: var(--color-gray-100);
  margin-bottom: var(--space-4);
}

.embedContainer iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 0;
}

/* Spotify embeds are taller - adjust for podcast player */
.embedContainer--podcast {
  padding-bottom: 232px; /* Fixed height for Spotify episode player */
  max-width: 100%;
}
```

**Part B: Update MediaDetail.ts to render embeds**

In renderMediaDetail function, add embed section after descriptionSection:

```typescript
// Embed section for YouTube/Spotify players
const embedSection = media.embedUrl
  ? `
      <section class="${styles.embedContainer}${media.type === 'podcast' ? ` ${styles['embedContainer--podcast']}` : ''}">
        <iframe
          src="${media.embedUrl}"
          title="${media.title}"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </section>
    `
  : '';
```

Insert ${embedSection} in the return template after ${descriptionSection} and before ${linkHtml}.

IMPORTANT: Use styles['embedContainer--podcast'] bracket notation for the modifier class (CSS modules with hyphens).
  </action>
  <verify>
Run: `npm run dev` and navigate to a media item
Expected: No console errors, page renders without breaking
  </verify>
  <done>
- DetailPage.module.css has .embedContainer and .embedContainer--podcast classes
- MediaDetail.ts conditionally renders iframe when embedUrl exists
- Podcast embeds use fixed height, videos use 16:9 aspect ratio
  </done>
</task>

<task type="auto">
  <name>Task 3: Update media.json with samreynolds.org content</name>
  <files>data/media.json</files>
  <action>
First, use WebFetch to get media items from https://samreynolds.org/

Then replace the entire media array with the 4 required items from CONTEXT.md:

1. **CIEEM Nature in a Nutshell podcast** (June 2025)
   - Type: podcast
   - Venue: CIEEM Nature in a Nutshell
   - Need to find Spotify episode ID - search for "Nature in a Nutshell Sam Reynolds"
   - embedUrl: https://open.spotify.com/embed/episode/{episode-id}

2. **COP30 video** (Nov 2025)
   - Type: video
   - Venue: COP30 Brazil
   - embedUrl: https://www.youtube.com/embed/210uVXwX1iE
   - Note: Date is future (Nov 2025) - verify video exists before including

3. **Wildscreen panel "AI, an Altruist's Guide"** (March 2025)
   - Type: panel
   - Venue: Wildscreen Festival
   - Link only (no embed)

4. **Cambridge feature "AI for Nature: Embrace with Caution"** (May 2025)
   - Type: interview
   - Venue: Cambridge University
   - Link to cam.ac.uk article (no embed)

JSON format:
```json
{
  "media": [
    {
      "id": "cieem-podcast-2025",
      "type": "podcast",
      "title": "...",
      "venue": "CIEEM Nature in a Nutshell",
      "date": "2025-06-25",
      "embedUrl": "https://open.spotify.com/embed/episode/...",
      "description": "..."
    }
    // ... other items
  ]
}
```

Order: Reverse chronological (newest first by date)

IMPORTANT:
- Complete replacement, not merge with placeholder data
- Only include the 4 items specified in requirements
- Use descriptions from samreynolds.org
  </action>
  <verify>
Run: `node -e "const m = require('./data/media.json'); console.log(m.media.length, m.media.map(i => i.id))"`
Expected: Shows 4 and the item IDs
  </verify>
  <done>
- media.json contains exactly 4 items
- CIEEM podcast has embedUrl (Spotify)
- COP30 video has embedUrl (YouTube) if video exists
- Wildscreen and Cambridge have links but no embedUrl
- Sorted newest to oldest
  </done>
</task>

</tasks>

<verification>
1. `npm run dev` - site builds without errors
2. Navigate to Media section - shows 4 items
3. Click CIEEM podcast - embedded Spotify player appears and is playable
4. Click COP30 video - embedded YouTube player appears (if video exists)
5. Click Wildscreen panel - shows description and external link
6. Embeds are responsive on window resize
</verification>

<success_criteria>
- MediaItem type includes embedUrl field
- MediaDetail renders iframes for items with embedUrl
- Embeds are responsive (16:9 video, fixed-height podcast)
- media.json has 4 items matching samreynolds.org
- Embedded players are functional
</success_criteria>

<output>
After completion, create `.planning/phases/13-content-sync/13-02-SUMMARY.md`
</output>
