---
phase: 09-change-game
plan: 06
type: execute
wave: 4
depends_on: ["09-03", "09-04", "09-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Pallet Town map visible with Pokemon sprites"
    - "Player character animates when moving"
    - "All 3 buildings can be entered and exited"
    - "Content displays correctly in each building"
    - "Game runs without errors"
  artifacts: []
  key_links: []
---

<objective>
Visual verification of complete Pokemon sprite replacement.

Purpose: Confirm that all Phase 09 changes work correctly together - sprites load, map renders, player moves, buildings work, content displays.

Output: User verification that the game looks and functions correctly.
</objective>

<execution_context>
@/home/sam/.claude/get-shit-done/workflows/execute-plan.md
@/home/sam/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-change-game/09-01-SUMMARY.md
@.planning/phases/09-change-game/09-02-SUMMARY.md
@.planning/phases/09-change-game/09-03-SUMMARY.md
@.planning/phases/09-change-game/09-04-SUMMARY.md
@.planning/phases/09-change-game/09-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Pre-verification checks</name>
  <files></files>
  <action>
Before user verification, run automated checks:

1. **Start dev server:**
```bash
cd /home/sam/Documents/Website
npm run dev
```

2. **Check browser console for errors:**
   - Open http://localhost:5173
   - Open browser dev tools (F12)
   - Check Console tab for any JavaScript errors
   - Verify "Pokemon sprite sheets loaded" message appears

3. **Verify sprite sheet loading:**
   - Check Network tab for sprite sheet requests
   - Both PNG files should load with 200 status:
     - `Game Boy Advance - Pokemon FireRed _ LeafGreen - Maps (Towns, Buildings, Etc.) - Pallet Town.png`
     - `Game Boy Advance - Pokemon FireRed _ LeafGreen - Trainers & Non-Playable Characters - Overworld NPCs.png`

4. **Quick functional test:**
   - Press 'G' or click "Play Game" to enter game mode
   - Verify map renders (not blank/black)
   - Verify player character visible
   - Verify arrow keys move player
   - Verify no console errors during movement

If any errors, fix them before proceeding to user verification.
  </action>
  <verify>
Dev server running, no console errors, sprite sheets loaded, map visible, player moves
  </verify>
  <done>Pre-verification checks pass, ready for user testing</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete Pokemon FireRed/LeafGreen sprite replacement:
- Pallet Town outdoor map with trees, paths, flowers, water
- 3 buildings: Player's House, Rival's House, Professor Oak's Lab
- Pokemon-style player character (16x32, 4-direction animation)
- Building interiors with academic content zones
- Content panels display publications, talks, media, research, about info
  </what-built>
  <how-to-verify>
1. **Start the game:**
   - Open http://localhost:5173
   - Click "Play Game" or press 'G' to enter game mode

2. **Verify outdoor map:**
   - [ ] Map looks like Pallet Town (not Cambridge campus)
   - [ ] Trees form border around edges
   - [ ] Paths visible connecting buildings
   - [ ] 3 buildings visible (2 houses at top, lab at bottom)
   - [ ] Flowers and decorative elements present
   - [ ] Small pond visible (bottom left area)

3. **Verify player character:**
   - [ ] Character is visibly taller than tiles (16x32 sprite)
   - [ ] Character animates when moving (walk cycle)
   - [ ] Character faces correct direction when moving
   - [ ] Movement feels smooth (not choppy)

4. **Test Player's House:**
   - [ ] Walk to left house and enter
   - [ ] Welcome message appears
   - [ ] Interior has furniture (TV, sofa, table)
   - [ ] Interact with TV - shows About/bio content
   - [ ] Stairs visible (if 2F implemented)
   - [ ] Can exit back to outdoor map

5. **Test Rival's House:**
   - [ ] Walk to right house and enter
   - [ ] Welcome message mentions talks/media
   - [ ] TV area triggers media content
   - [ ] Bookshelf triggers talks content
   - [ ] Can exit back to outdoor map

6. **Test Oak's Lab:**
   - [ ] Walk to bottom building and enter
   - [ ] Welcome message mentions research/publications
   - [ ] Bookshelves trigger publications panel
   - [ ] Lab tables trigger research content
   - [ ] Can exit back to outdoor map

7. **Overall impression:**
   - [ ] Sprites are crisp (not blurry)
   - [ ] Colors match Pokemon GBA aesthetic
   - [ ] Scale feels appropriate (not too big/small)
   - [ ] No visual glitches or missing tiles
  </how-to-verify>
  <resume-signal>
Type "approved" if all checks pass.

If issues found, describe them and I will create fixes:
- "sprites blurry" - will adjust imageSmoothingEnabled
- "player too small" - will adjust scale factor
- "tiles missing" - will add missing sprite coordinates
- "content not displaying" - will fix interaction handlers
- Other issues - describe specifically
  </resume-signal>
</task>

<task type="auto">
  <name>Task 3: Address any reported issues</name>
  <files>js/game/sprites.js, js/game/world.js, js/game/buildings.js, js/game/engine.js, js/game/player.js</files>
  <action>
If user reports issues in the verification checkpoint, fix them:

**Common issues and fixes:**

1. **Sprites blurry:**
   - Ensure `ctx.imageSmoothingEnabled = false` in engine.js
   - Add CSS `image-rendering: pixelated` to canvas

2. **Player too small/large:**
   - Adjust `Sprites.scale` value (try 2, 3, or 4)

3. **Missing tiles (black squares):**
   - Add missing coordinate entries to TILE_COORDS in sprites.js
   - Check that getTileSprite() returns correct names

4. **Content not displaying:**
   - Check interaction type names match handleInteraction() cases
   - Verify SITE_CONTENT is loaded

5. **Buildings can't be entered:**
   - Check door collision is set to 0
   - Verify interact data has correct building ID

6. **Animation not working:**
   - Check animFrame increments during movement
   - Verify getCharacterFrame() returns different frames

Fix all reported issues, then return to verification checkpoint.
  </action>
  <verify>
All user-reported issues fixed, ready for re-verification if needed
  </verify>
  <done>Issues addressed (if any), verification complete</done>
</task>

</tasks>

<verification>
Phase 09 complete when user approves:
- Pallet Town map renders correctly
- Player character looks and moves correctly
- All 3 buildings accessible with correct content
- No visual glitches or errors
</verification>

<success_criteria>
- User confirms map looks like Pallet Town
- User confirms player character animates correctly
- User confirms all 3 buildings work
- User confirms content displays in each building
- User confirms overall visual quality is acceptable
</success_criteria>

<output>
After completion, create `.planning/phases/09-change-game/09-06-SUMMARY.md`
</output>
