---
phase: 02-content-data-layer
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - data/schemas/publication.schema.json
  - data/schemas/talk.schema.json
  - data/schemas/media.schema.json
  - data/schemas/research.schema.json
  - data/schemas/about.schema.json
autonomous: true

must_haves:
  truths:
    - "JSON Schema files exist for all content types"
    - "Schemas enforce required fields per requirements"
    - "Ajv is installed and validates schema syntax"
  artifacts:
    - path: "data/schemas/publication.schema.json"
      provides: "Publication validation schema"
      contains: "required"
    - path: "data/schemas/talk.schema.json"
      provides: "Talk validation schema"
      contains: "required"
    - path: "data/schemas/media.schema.json"
      provides: "Media validation schema"
      contains: "required"
    - path: "data/schemas/research.schema.json"
      provides: "Research validation schema"
      contains: "required"
    - path: "data/schemas/about.schema.json"
      provides: "About validation schema"
      contains: "required"
    - path: "package.json"
      provides: "Ajv dependency"
      contains: "ajv"
  key_links:
    - from: "data/schemas/*.schema.json"
      to: "JSON Schema 2020-12"
      via: "$schema declaration"
      pattern: "json-schema.org/draft/2020-12"
---

<objective>
Install Ajv JSON Schema validator and create JSON Schema 2020-12 schemas for all content types (publications, talks, media, research, about).

Purpose: Schemas define the contract for content data, ensuring consistency and catching errors before runtime. They serve as both documentation and validation.
Output: Five JSON Schema files in data/schemas/ directory, Ajv installed as dev dependency.
</objective>

<execution_context>
@/home/sam/.claude/get-shit-done/workflows/execute-plan.md
@/home/sam/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-content-data-layer/02-CONTEXT.md
@.planning/phases/02-content-data-layer/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Ajv and ajv-formats</name>
  <files>package.json</files>
  <action>
Install Ajv JSON Schema validator and ajv-formats as dev dependencies:

```bash
npm install --save-dev ajv ajv-formats
```

Ajv is used for build-time validation of content files, not runtime (static site).
  </action>
  <verify>Run `npm ls ajv` shows ajv@8.x installed</verify>
  <done>package.json contains ajv and ajv-formats in devDependencies</done>
</task>

<task type="auto">
  <name>Task 2: Create JSON Schema files for all content types</name>
  <files>
    data/schemas/publication.schema.json
    data/schemas/talk.schema.json
    data/schemas/media.schema.json
    data/schemas/research.schema.json
    data/schemas/about.schema.json
  </files>
  <action>
Create data/schemas/ directory and five JSON Schema 2020-12 files:

**publication.schema.json:**
- Root: object with "publications" array (required)
- Each publication requires: id (string), title (string), authors (array of {name: string, isSamReynolds: boolean}), journal (string), year (integer 1900-2100), doi (string with pattern ^10\.\d{4,}/), date (string, format: date)
- Optional: abstract (string)

**talk.schema.json:**
- Root: object with "talks" array (required)
- Each talk requires: id (string), title (string), venue (string), date (string, format: date)
- Optional: slides (string, format: uri), video (string, format: uri)
- NO description field (per CONTEXT.md - title only)

**media.schema.json:**
- Root: object with "media" array (required)
- Each item requires: id (string), type (enum: podcast, video, panel, interview), title (string), venue (string), date (string, format: date)
- Optional: link (string, format: uri), description (string)

**research.schema.json:**
- Root: object with "researchTopics" array (required)
- Each topic requires: id (string), name (string), description (string)
- Optional: relatedPublications (array of strings - publication IDs)

**about.schema.json:**
- Root: object (required fields directly on root)
- Requires: name (string), title (string), affiliation (string), email (string, format: email), bio (array of strings - paragraphs), education (array of {degree: string, institution: string, year: integer})
- Optional: links (object with optional github, scholar, twitter, linkedin, researchgate as uri strings)

Use JSON Schema 2020-12 ($schema: "https://json-schema.org/draft/2020-12/schema").
Use ajv-formats for date, uri, email validation.
Include $id for each schema matching filename.
  </action>
  <verify>
Run node to parse each schema file:
```bash
node -e "JSON.parse(require('fs').readFileSync('data/schemas/publication.schema.json'))"
```
Repeat for all 5 schemas - no parse errors.
  </verify>
  <done>
All 5 schema files exist in data/schemas/ with:
- $schema pointing to JSON Schema 2020-12
- Required fields enforced per requirements (DATA-02 through DATA-06)
- Date fields use "format": "date" for ISO 8601 validation
- DOI has pattern validation for 10.xxxx/ format
  </done>
</task>

</tasks>

<verification>
1. `npm ls ajv` shows ajv@8.x installed
2. All 5 schema files parse as valid JSON
3. Each schema has $schema declaration for 2020-12
4. Each schema has "required" array with mandatory fields
</verification>

<success_criteria>
- Ajv 8.x installed as dev dependency
- 5 JSON Schema files exist in data/schemas/
- Schemas enforce required fields matching DATA-02 through DATA-06 requirements
- Date fields use ISO 8601 format validation
- DOI field has pattern validation
</success_criteria>

<output>
After completion, create `.planning/phases/02-content-data-layer/02-01-SUMMARY.md`
</output>
