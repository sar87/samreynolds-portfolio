---
phase: 12-animations
plan: 02
type: execute
wave: 2
depends_on: ["12-01"]
files_modified:
  - src/components/Section/Section.ts
  - src/components/Section/Section.module.css
  - src/components/Card/Card.ts
  - src/components/Card/Card.module.css
autonomous: true

must_haves:
  truths:
    - "Sections fade and slide into view when scrolled into viewport"
    - "Sections alternate slide direction (left/right) for visual interest"
    - "Cards in grids animate in with staggered timing"
  artifacts:
    - path: "src/components/Section/Section.ts"
      provides: "Section with scroll-reveal class"
      contains: "scroll-reveal"
    - path: "src/components/Card/Card.ts"
      provides: "Card grid with data-stagger attribute"
      contains: "data-stagger"
  key_links:
    - from: "src/components/Section/Section.ts"
      to: "src/styles/animations.css"
      via: "scroll-reveal class application"
      pattern: "scroll-reveal"
    - from: "src/components/Card/Card.ts"
      to: "src/animations/scrollReveal.ts"
      via: "data-stagger attribute triggers initStaggeredCards"
      pattern: "data-stagger"
---

<objective>
Implement scroll reveal animations for content sections and staggered card grid reveals.

Purpose: Makes the site feel dynamic and polished by revealing content as users scroll. Alternating slide directions create visual rhythm, and staggered cards add delight without being distracting.

Output: Sections and cards animate into view with smooth, snappy transitions.
</objective>

<execution_context>
@/home/sam/.claude/get-shit-done/workflows/execute-plan.md
@/home/sam/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/12-animations/12-CONTEXT.md
@.planning/phases/12-animations/12-01-SUMMARY.md

@src/components/Section/Section.ts
@src/components/Section/Section.module.css
@src/components/Card/Card.ts
@src/components/Card/Card.module.css
@src/styles/animations.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add scroll-reveal to sections with alternating slide direction</name>
  <files>src/components/Section/Section.ts, src/components/Section/Section.module.css</files>
  <action>
1. Update `src/components/Section/Section.ts`:
   - Add `scroll-reveal` class to the section element
   - The animation system (from Plan 01) will handle:
     - Intersection Observer detecting visibility
     - Adding `.revealed` class when visible
     - Setting `data-slide-from` for alternating direction

   Example change to section template:
   ```typescript
   return `
     <section id="${id}" class="${styles.section} scroll-reveal">
       ...
     </section>
   `;
   ```

2. Update `src/components/Section/Section.module.css`:
   - Remove any existing transition properties on .section (the animation CSS handles this now)
   - Ensure the section plays well with the global scroll-reveal styles

Note: The actual animation styling (.scroll-reveal initial state, transition, .revealed state) is in animations.css from Plan 01. The component just adds the class.
  </action>
  <verify>
- Run `npm run dev`
- Open browser to localhost:5173
- Scroll down the page
- Sections should fade/slide into view as they enter viewport
- Sections should NOT be visible until scrolled to (opacity: 0 initial state)
  </verify>
  <done>
Sections have scroll-reveal class applied, animations trigger on scroll.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add staggered animations to card grids</name>
  <files>src/components/Card/Card.ts, src/components/Card/Card.module.css</files>
  <action>
1. Update `src/components/Card/Card.ts`:
   - In the `renderCardGrid()` function, add `data-stagger` attribute to the grid container:
   ```typescript
   export function renderCardGrid(cards: string[]): string {
     return `<div class="${styles.cardGrid}" data-stagger>${cards.join('')}</div>`;
   }
   ```

   - Add `scroll-reveal` class to individual cards in each card renderer (renderPublicationCard, renderTalkCard, renderMediaCard):
   ```typescript
   return `
     <article class="${styles.card} scroll-reveal">
       ...
     </article>
   `;
   ```

2. Update `src/components/Card/Card.module.css`:
   - Add CSS for staggered reveal using the --animation-order custom property:
   ```css
   /* Staggered reveal timing - set by JS via --animation-order */
   .card {
     transition-delay: calc(var(--animation-order, 0) * var(--stagger-delay, 50ms));
   }
   ```

   - Ensure the existing hover transitions don't conflict with reveal transitions

The initStaggeredCards() function from Plan 01 will automatically set --animation-order on each card when initAnimations() runs.
  </action>
  <verify>
- Run `npm run dev`
- Open browser to localhost:5173
- Scroll to Publications, Talks, or Media section
- Cards should appear one after another with staggered timing
- First card appears, then second 50ms later, then third, etc.
  </verify>
  <done>
Card grids have data-stagger attribute, individual cards have scroll-reveal class, staggered timing works.
  </done>
</task>

<task type="auto">
  <name>Task 3: Verify scroll reveal respects reduced-motion</name>
  <files>None (verification only)</files>
  <action>
1. Test with reduced-motion preference:
   - In browser DevTools, open Rendering tab
   - Enable "Emulate CSS media feature prefers-reduced-motion: reduce"

2. Verify behavior:
   - All sections and cards should be immediately visible (no animation)
   - No opacity: 0 initial state should apply
   - Content should not flash or jump

3. Test with normal motion preference:
   - Disable the emulation
   - Refresh page
   - Verify animations work as expected

If reduced-motion doesn't work correctly, ensure animations.css properly wraps animation styles in @media (prefers-reduced-motion: no-preference) and provides visible fallback states for @media (prefers-reduced-motion: reduce).
  </action>
  <verify>
- With prefers-reduced-motion: reduce, content is immediately visible
- With prefers-reduced-motion: no-preference, animations play
- No accessibility violations
  </verify>
  <done>
Scroll reveal animations properly respect reduced-motion preferences.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. Sections have `scroll-reveal` class in rendered HTML
3. Card grids have `data-stagger` attribute
4. Cards have `scroll-reveal` class
5. Scrolling reveals sections with fade + slide
6. Cards reveal with staggered timing
7. Reduced-motion users see content immediately
</verification>

<success_criteria>
- Sections animate in when scrolled into viewport
- Animation direction alternates between sections
- Card grids animate with staggered timing (each card slightly delayed)
- All animations disabled for prefers-reduced-motion: reduce users
- 60fps smooth animations (no jank)
</success_criteria>

<output>
After completion, create `.planning/phases/12-animations/12-02-SUMMARY.md`
</output>
