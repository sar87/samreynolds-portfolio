---
phase: 07-landing-mode-switching
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Landing/GamePreview.ts
  - src/components/Landing/LoadingScreen.ts
  - src/components/Landing/LoadingScreen.css
autonomous: true

must_haves:
  truths:
    - "Game preview shows animated pixel art campus scene"
    - "Loading screen displays pixel-themed spinner"
    - "Animation runs at low FPS (8) for subtle effect"
  artifacts:
    - path: "src/components/Landing/GamePreview.ts"
      provides: "Animated canvas preview of campus"
      exports: ["createGamePreview", "startPreviewAnimation", "stopPreviewAnimation"]
    - path: "src/components/Landing/LoadingScreen.ts"
      provides: "Loading screen component"
      exports: ["showLoadingScreen", "hideLoadingScreen"]
    - path: "src/components/Landing/LoadingScreen.css"
      provides: "Loading spinner styles"
      contains: ".loading-screen"
  key_links:
    - from: "src/components/Landing/GamePreview.ts"
      to: "canvas rendering"
      via: "getContext('2d')"
      pattern: "getContext.*2d"
---

<objective>
Create the animated game preview canvas and loading screen for game mode transitions.

Purpose: Visual polish that makes game mode inviting and provides feedback during asset loading
Output: GamePreview.ts with animation, LoadingScreen.ts with spinner
</objective>

<execution_context>
@/home/sam/.claude/get-shit-done/workflows/execute-plan.md
@/home/sam/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/07-landing-mode-switching/07-CONTEXT.md
@.planning/phases/07-landing-mode-switching/07-RESEARCH.md
@src/styles/variables.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create GamePreview component with animated canvas</name>
  <files>src/components/Landing/GamePreview.ts</files>
  <action>
Create GamePreview.ts that provides a simple animated preview of the campus:

1. **createGamePreview()**: Returns HTML string for canvas element (320x240)

2. **startPreviewAnimation(canvas: HTMLCanvasElement)**:
   - Draw a simplified campus scene using filled rectangles (no sprite loading needed)
   - Colors: green grass (#90EE90), gray paths (#808080), brown buildings (#8B4513), blue sky/top (#87CEEB)
   - Simple scene: grass base, path from bottom, 2-3 building silhouettes
   - Animate a small "player" rectangle (16x16, teal accent color) walking left-right on the path
   - Use setInterval at 125ms (8 FPS) for subtle, non-distracting animation
   - Return the interval ID for cleanup

3. **stopPreviewAnimation(intervalId: number)**: clearInterval wrapper

The preview should give the impression of a pixel-art game without loading actual sprites (those load when game starts).

Keep it simple - this is a teaser, not the game itself. Use basic shapes only.
  </action>
  <verify>
grep "export.*createGamePreview" src/components/Landing/GamePreview.ts
grep "export.*startPreviewAnimation" src/components/Landing/GamePreview.ts
grep "setInterval" src/components/Landing/GamePreview.ts
  </verify>
  <done>
GamePreview component exists with:
- createGamePreview() returns canvas HTML
- startPreviewAnimation() draws animated scene
- stopPreviewAnimation() cleans up interval
- Animation runs at 8 FPS
  </done>
</task>

<task type="auto">
  <name>Task 2: Create LoadingScreen component</name>
  <files>src/components/Landing/LoadingScreen.ts, src/components/Landing/LoadingScreen.css</files>
  <action>
Create LoadingScreen.ts with show/hide functions:

1. **showLoadingScreen()**:
   - Create and append a full-screen overlay div with class "loading-screen"
   - Contains centered spinner div with class "pixel-spinner"
   - Contains "Loading..." text below spinner
   - Add to document.body

2. **hideLoadingScreen()**:
   - Remove the loading-screen element from DOM
   - Include 5-second timeout fallback - if called and element doesn't exist, no-op

Create LoadingScreen.css:
- .loading-screen: position fixed, inset 0, background var(--color-bg), z-index 9999, flex center
- .pixel-spinner: 64x64 div with teal background, uses steps() animation for pixelated rotation effect
- Animation: clip-path changes to simulate spinning square (from research pattern)
- @keyframes pixel-rotate with 4 steps
- @media (prefers-reduced-motion: reduce): replace animation with static "Loading..." text only
  </action>
  <verify>
grep "export.*showLoadingScreen" src/components/Landing/LoadingScreen.ts
grep "export.*hideLoadingScreen" src/components/Landing/LoadingScreen.ts
grep "@keyframes pixel-rotate" src/components/Landing/LoadingScreen.css
grep "prefers-reduced-motion" src/components/Landing/LoadingScreen.css
  </verify>
  <done>
LoadingScreen component exists with:
- showLoadingScreen() creates overlay
- hideLoadingScreen() removes overlay
- Pixel-themed spinner animation
- Reduced motion fallback
  </done>
</task>

</tasks>

<verification>
1. GamePreview exports createGamePreview, startPreviewAnimation, stopPreviewAnimation
2. LoadingScreen exports showLoadingScreen, hideLoadingScreen
3. LoadingScreen.css has pixel spinner animation
4. Both have prefers-reduced-motion support
5. No sprite dependencies - pure shapes/CSS
</verification>

<success_criteria>
- Game preview shows simple animated campus teaser
- Loading screen provides visual feedback during game load
- Animations are subtle (8 FPS preview, CSS spinner)
- Reduced motion respected in both components
</success_criteria>

<output>
After completion, create `.planning/phases/07-landing-mode-switching/07-02-SUMMARY.md`
</output>
