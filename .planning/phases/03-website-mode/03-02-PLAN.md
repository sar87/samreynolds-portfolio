---
phase: 03-website-mode
plan: 02
type: execute
wave: 2
depends_on: ["03-01"]
files_modified:
  - src/components/Header/Header.ts
  - src/components/Header/Header.module.css
  - src/components/Section/Section.ts
  - src/components/Section/Section.module.css
  - src/components/Card/Card.ts
  - src/components/Card/Card.module.css
autonomous: true

must_haves:
  truths:
    - "Header displays name and navigation links"
    - "Mobile hamburger menu is accessible with ARIA"
    - "Section component renders with heading and content"
    - "Cards display content with hover states"
  artifacts:
    - path: "src/components/Header/Header.ts"
      provides: "Header with nav and mobile menu"
      exports: ["renderHeader", "initMobileNav"]
    - path: "src/components/Section/Section.ts"
      provides: "Reusable section wrapper"
      exports: ["renderSection"]
    - path: "src/components/Card/Card.ts"
      provides: "Card components for publications, talks, media"
      exports: ["renderPublicationCard", "renderTalkCard", "renderMediaCard"]
  key_links:
    - from: "src/components/Header/Header.ts"
      to: "src/styles/variables.css"
      via: "CSS module imports custom properties"
      pattern: "var\\(--"
    - from: "src/components/Card/Card.ts"
      to: "src/types/content.ts"
      via: "type imports"
      pattern: "import.*from.*types/content"
---

<objective>
Build the reusable UI components: Header with responsive navigation, Section wrapper, and Card components for displaying publications, talks, and media items.

Purpose: These components are the building blocks for the home page and detail pages. The header provides navigation, sections organize content, and cards present content items in the Linear.app-inspired minimal style.

Output: Header component with mobile hamburger menu, Section component, and three card variants (publication, talk, media).
</objective>

<execution_context>
@/home/sam/.claude/get-shit-done/workflows/execute-plan.md
@/home/sam/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03-website-mode/03-CONTEXT.md
@.planning/phases/03-website-mode/03-RESEARCH.md

# Foundation from Plan 01
@src/styles/variables.css
@src/types/content.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Header Component with Mobile Navigation</name>
  <files>
    src/components/Header/Header.ts
    src/components/Header/Header.module.css
  </files>
  <action>
Create the header component following RESEARCH.md patterns:

**src/components/Header/Header.ts:**
```typescript
import styles from './Header.module.css';

const NAV_ITEMS = [
  { label: 'About', href: '#about' },
  { label: 'Research', href: '#research' },
  { label: 'Publications', href: '#publications' },
  { label: 'Talks', href: '#talks' },
  { label: 'Media', href: '#media' },
];

export function renderHeader(): string {
  const navLinks = NAV_ITEMS.map(
    (item) => `<a href="${item.href}" class="${styles.navLink}">${item.label}</a>`
  ).join('');

  const mobileNavLinks = NAV_ITEMS.map(
    (item) => `<li><a href="${item.href}" class="${styles.mobileNavLink}">${item.label}</a></li>`
  ).join('');

  return `
    <header class="${styles.header}">
      <div class="${styles.headerInner}">
        <a href="#/" class="${styles.logo}">Sam Reynolds</a>
        <nav class="${styles.nav}" aria-label="Main navigation">
          ${navLinks}
        </nav>
        <button
          class="${styles.menuButton}"
          aria-expanded="false"
          aria-controls="mobile-nav"
          aria-label="Menu"
        >
          <span class="${styles.menuIcon}"></span>
        </button>
      </div>
      <nav id="mobile-nav" class="${styles.mobileNav}" hidden aria-label="Mobile navigation">
        <ul class="${styles.mobileNavList}">
          ${mobileNavLinks}
        </ul>
      </nav>
    </header>
  `;
}

export function initMobileNav(): void {
  const menuButton = document.querySelector<HTMLButtonElement>(`.${styles.menuButton}`);
  const mobileNav = document.querySelector<HTMLElement>('#mobile-nav');

  if (!menuButton || !mobileNav) return;

  menuButton.addEventListener('click', () => {
    const isExpanded = menuButton.getAttribute('aria-expanded') === 'true';
    menuButton.setAttribute('aria-expanded', String(!isExpanded));
    mobileNav.hidden = isExpanded;

    // Focus first link when opening
    if (!isExpanded) {
      mobileNav.querySelector<HTMLAnchorElement>('a')?.focus();
    }
  });

  // Close on link click
  mobileNav.querySelectorAll('a').forEach((link) => {
    link.addEventListener('click', () => {
      menuButton.setAttribute('aria-expanded', 'false');
      mobileNav.hidden = true;
    });
  });

  // Close on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !mobileNav.hidden) {
      menuButton.setAttribute('aria-expanded', 'false');
      mobileNav.hidden = true;
      menuButton.focus();
    }
  });
}
```

**src/components/Header/Header.module.css:**
Follow RESEARCH.md responsive header pattern:
- Sticky header with border-bottom
- Flex layout for logo and nav
- Desktop: horizontal nav links
- Mobile (max-width: 768px): hide nav, show hamburger button
- Mobile nav: slide-down panel with full-width links
- Hamburger icon: three-line CSS-only icon
- Focus-visible styles on all interactive elements
- Use CSS custom properties from variables.css
  </action>
  <verify>
```bash
npx tsc --noEmit
```
Visual check: Header renders with nav links, hamburger appears on mobile viewport, ARIA attributes present.
  </verify>
  <done>
Header renders with sticky position, desktop nav hides on mobile, hamburger menu is keyboard accessible with ARIA.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Section Component</name>
  <files>
    src/components/Section/Section.ts
    src/components/Section/Section.module.css
  </files>
  <action>
Create the section wrapper component from RESEARCH.md:

**src/components/Section/Section.ts:**
```typescript
import styles from './Section.module.css';

interface SectionProps {
  id: string;
  title: string;
  children: string;
}

export function renderSection({ id, title, children }: SectionProps): string {
  return `
    <section id="${id}" class="${styles.section}" aria-labelledby="${id}-heading">
      <div class="${styles.container}">
        <h2 id="${id}-heading" class="${styles.heading}">${title}</h2>
        ${children}
      </div>
    </section>
  `;
}
```

**src/components/Section/Section.module.css:**
- Section padding using --section-gap
- scroll-margin-top for sticky header offset (5rem)
- Border-top between sections (except first)
- Heading: font-size-3xl, weight 600, margin-bottom
- Container: max-width, auto margins, content-padding
  </action>
  <verify>
```bash
npx tsc --noEmit
```
Section renders with proper heading structure and ARIA labelledby.
  </verify>
  <done>
Section component renders semantic HTML with accessible heading, scroll offset for sticky header.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Card Components</name>
  <files>
    src/components/Card/Card.ts
    src/components/Card/Card.module.css
  </files>
  <action>
Create card components for each content type following RESEARCH.md complete card example:

**src/components/Card/Card.ts:**
```typescript
import type { Publication, Talk, MediaItem } from '../../types/content';
import styles from './Card.module.css';

export function renderPublicationCard(pub: Publication): string {
  const authorStr = pub.authors.map((a) => a.name).join(', ');

  return `
    <article class="${styles.card}">
      <a href="#/publication/${pub.id}" class="${styles.cardLink}">
        <h3 class="${styles.title}">${pub.title}</h3>
        <p class="${styles.meta}">${authorStr}</p>
        <p class="${styles.secondary}">${pub.journal} &middot; ${pub.year}</p>
      </a>
    </article>
  `;
}

export function renderTalkCard(talk: Talk): string {
  const date = new Date(talk.date).toLocaleDateString('en-GB', {
    year: 'numeric',
    month: 'short',
    day: 'numeric',
  });

  return `
    <article class="${styles.card}">
      <a href="#/talk/${talk.id}" class="${styles.cardLink}">
        <h3 class="${styles.title}">${talk.title}</h3>
        <p class="${styles.meta}">${talk.venue}</p>
        <p class="${styles.secondary}">${date}</p>
      </a>
    </article>
  `;
}

export function renderMediaCard(media: MediaItem): string {
  const date = new Date(media.date).toLocaleDateString('en-GB', {
    year: 'numeric',
    month: 'short',
  });
  const typeLabel = media.type.charAt(0).toUpperCase() + media.type.slice(1);

  return `
    <article class="${styles.card}">
      <a href="#/media/${media.id}" class="${styles.cardLink}">
        <span class="${styles.badge}">${typeLabel}</span>
        <h3 class="${styles.title}">${media.title}</h3>
        <p class="${styles.meta}">${media.venue}</p>
        <p class="${styles.secondary}">${date}</p>
      </a>
    </article>
  `;
}

export function renderCardGrid(cards: string[]): string {
  return `<div class="${styles.cardGrid}">${cards.join('')}</div>`;
}
```

**src/components/Card/Card.module.css:**
From RESEARCH.md Pattern 2 + complete card component:
- cardGrid: CSS Grid with auto-fill, minmax(min(100%, 350px), 1fr)
- card: padding, border, border-radius, hover state (border-color accent)
- cardLink: block display, no decoration, inherit color
- Focus-visible on card (using :has selector)
- title: font-size-lg, weight 600, line-clamp 2
- meta: font-size-sm, text-secondary
- secondary: font-size-xs, text-tertiary
- badge: small uppercase label with accent color background
  </action>
  <verify>
```bash
npx tsc --noEmit
```
Cards render with proper semantic structure, grid layout works, hover states visible.
  </verify>
  <done>
Publication, Talk, and Media cards render with minimal Linear-style design, grid container works responsively.
  </done>
</task>

</tasks>

<verification>
1. Run `npx tsc --noEmit` - no TypeScript errors
2. Import and render components in a test page:
   - Header sticky at top
   - Mobile hamburger appears at narrow viewport
   - Hamburger expands/collapses menu with keyboard
   - Section has proper heading hierarchy
   - Cards display in responsive grid
   - Card hover shows accent border
3. Check accessibility:
   - Tab through header nav links
   - Hamburger has aria-expanded
   - Section has aria-labelledby
   - Cards are focusable articles with links
</verification>

<success_criteria>
- [ ] Header sticky, shows nav on desktop, hamburger on mobile
- [ ] Mobile menu is keyboard accessible (Escape closes, focus trapped)
- [ ] ARIA attributes correct on all interactive elements
- [ ] Section component has semantic HTML with accessible heading
- [ ] Cards display in responsive 2-column grid on desktop, 1 on mobile
- [ ] Card hover states show accent color border
- [ ] Line clamp prevents title overflow
- [ ] All TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-website-mode/03-02-SUMMARY.md`
</output>
