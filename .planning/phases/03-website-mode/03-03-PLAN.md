---
phase: 03-website-mode
plan: 03
type: execute
wave: 3
depends_on: ["03-01", "03-02"]
files_modified:
  - src/pages/HomePage.ts
  - src/pages/HomePage.module.css
  - src/pages/PublicationDetail.ts
  - src/pages/TalkDetail.ts
  - src/pages/MediaDetail.ts
  - src/pages/DetailPage.module.css
autonomous: true

must_haves:
  truths:
    - "Home page displays all 5 content sections"
    - "Publications section shows all 15 papers as cards"
    - "Talks section shows all 19 talks chronologically"
    - "Detail pages show full content for individual items"
    - "Back link returns to home page"
  artifacts:
    - path: "src/pages/HomePage.ts"
      provides: "Main scrollable page with all sections"
      exports: ["renderHomePage"]
    - path: "src/pages/PublicationDetail.ts"
      provides: "Publication detail view"
      exports: ["renderPublicationDetail"]
    - path: "src/pages/TalkDetail.ts"
      provides: "Talk detail view"
      exports: ["renderTalkDetail"]
    - path: "src/pages/MediaDetail.ts"
      provides: "Media detail view"
      exports: ["renderMediaDetail"]
  key_links:
    - from: "src/pages/HomePage.ts"
      to: "src/lib/content.ts"
      via: "content loader imports"
      pattern: "import.*from.*lib/content"
    - from: "src/pages/HomePage.ts"
      to: "src/components/Card/Card.ts"
      via: "card component imports"
      pattern: "import.*from.*components/Card"
---

<objective>
Build the main pages: HomePage with all content sections, and detail pages for publications, talks, and media items.

Purpose: These pages consume the components and content loaders to display the actual academic content. The home page is the primary view with all sections; detail pages show expanded information for individual items.

Output: Complete HomePage rendering all sections, and three detail page templates that display full item content.
</objective>

<execution_context>
@/home/sam/.claude/get-shit-done/workflows/execute-plan.md
@/home/sam/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/03-website-mode/03-CONTEXT.md
@.planning/phases/03-website-mode/03-RESEARCH.md

# Foundation and components from prior plans
@src/types/content.ts
@src/lib/content.ts
@src/components/Section/Section.ts
@src/components/Card/Card.ts

# Content data for reference
@data/about.json
@data/publications.json
@data/talks.json
@data/media.json
@data/research.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Home Page</name>
  <files>
    src/pages/HomePage.ts
    src/pages/HomePage.module.css
  </files>
  <action>
Create the main scrollable home page with all content sections:

**src/pages/HomePage.ts:**
```typescript
import { renderSection } from '../components/Section/Section';
import { renderPublicationCard, renderTalkCard, renderMediaCard, renderCardGrid } from '../components/Card/Card';
import { loadPublications, loadTalks, loadMedia, loadResearch, loadAbout } from '../lib/content';
import type { Publication, Talk, MediaItem, ResearchTopic, About } from '../types/content';
import styles from './HomePage.module.css';

export async function renderHomePage(): Promise<string> {
  // Load all content in parallel
  const [publications, talks, media, research, about] = await Promise.all([
    loadPublications(),
    loadTalks(),
    loadMedia(),
    loadResearch(),
    loadAbout(),
  ]);

  return `
    <main class="${styles.main}">
      ${renderAboutSection(about)}
      ${renderResearchSection(research)}
      ${renderPublicationsSection(publications)}
      ${renderTalksSection(talks)}
      ${renderMediaSection(media)}
    </main>
  `;
}

function renderAboutSection(about: About): string {
  const bioHtml = about.bio.map(p => `<p>${p}</p>`).join('');
  const educationHtml = about.education
    .map(e => `<li><strong>${e.degree}</strong> - ${e.institution}, ${e.year}</li>`)
    .join('');

  const content = `
    <div class="${styles.aboutGrid}">
      <div class="${styles.aboutContent}">
        <h1 class="${styles.name}">${about.name}</h1>
        <p class="${styles.title}">${about.title}</p>
        <p class="${styles.affiliation}">${about.affiliation}</p>
        <div class="${styles.bio}">${bioHtml}</div>
        <div class="${styles.links}">
          <a href="mailto:${about.email}" class="${styles.link}">Email</a>
          <a href="${about.links.github}" class="${styles.link}" target="_blank" rel="noopener">GitHub</a>
          <a href="${about.links.scholar}" class="${styles.link}" target="_blank" rel="noopener">Scholar</a>
          <a href="${about.links.twitter}" class="${styles.link}" target="_blank" rel="noopener">Twitter</a>
        </div>
      </div>
      <div class="${styles.aboutEducation}">
        <h3>Education</h3>
        <ul>${educationHtml}</ul>
      </div>
    </div>
  `;

  return renderSection({ id: 'about', title: 'About', children: content });
}

function renderResearchSection(research: ResearchTopic[]): string {
  const topicsHtml = research
    .map(topic => `
      <div class="${styles.researchTopic}">
        <h3 class="${styles.topicName}">${topic.name}</h3>
        <p class="${styles.topicDescription}">${topic.description}</p>
      </div>
    `)
    .join('');

  return renderSection({
    id: 'research',
    title: 'Research',
    children: `<div class="${styles.researchGrid}">${topicsHtml}</div>`,
  });
}

function renderPublicationsSection(publications: Publication[]): string {
  // Sort by date descending (most recent first)
  const sorted = [...publications].sort(
    (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()
  );
  const cards = sorted.map(renderPublicationCard);

  return renderSection({
    id: 'publications',
    title: 'Publications',
    children: renderCardGrid(cards),
  });
}

function renderTalksSection(talks: Talk[]): string {
  // Sort by date descending (most recent first)
  const sorted = [...talks].sort(
    (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()
  );
  const cards = sorted.map(renderTalkCard);

  return renderSection({
    id: 'talks',
    title: 'Talks',
    children: renderCardGrid(cards),
  });
}

function renderMediaSection(media: MediaItem[]): string {
  // Sort by date descending (most recent first)
  const sorted = [...media].sort(
    (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()
  );
  const cards = sorted.map(renderMediaCard);

  return renderSection({
    id: 'media',
    title: 'Media',
    children: renderCardGrid(cards),
  });
}
```

**src/pages/HomePage.module.css:**
- main: min-height 100vh
- aboutGrid: 2-column layout on desktop (content + education), 1 column mobile
- name: font-size-4xl, weight 700
- title, affiliation: secondary text color
- bio: prose styling with paragraph spacing
- links: flex row with gap, accent colored links
- researchGrid: vertical stack with gap
- researchTopic: card-like styling (optional subtle background)
- topicName: font-size-xl, weight 600
- topicDescription: secondary color, max-width for readability
  </action>
  <verify>
```bash
npx tsc --noEmit
```
HomePage renders all 5 sections with real content from JSON files.
  </verify>
  <done>
Home page displays About (with bio, education, links), Research (6 topics), Publications (15 cards), Talks (19 cards), Media (12 cards).
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Detail Pages</name>
  <files>
    src/pages/PublicationDetail.ts
    src/pages/TalkDetail.ts
    src/pages/MediaDetail.ts
    src/pages/DetailPage.module.css
  </files>
  <action>
Create detail pages for each content type with shared styling:

**src/pages/DetailPage.module.css:**
Shared styles for all detail pages:
- container: max-width 800px (narrower than home), auto margins
- backLink: accent color, with arrow indicator, margin-bottom
- detailHeader: title + meta section
- title: font-size-3xl, weight 700
- meta: secondary text, flex with separators
- content: prose styling for body text
- Abstract/description: larger line-height, proper paragraph spacing
- Link styling for DOI/video/slides links
- badge: same as card badge for media type

**src/pages/PublicationDetail.ts:**
```typescript
import { getPublicationById } from '../lib/content';
import styles from './DetailPage.module.css';

export async function renderPublicationDetail(id: string): Promise<string> {
  const pub = await getPublicationById(id);

  if (!pub) {
    return `
      <main class="${styles.container}">
        <a href="#/" class="${styles.backLink}">&larr; Back</a>
        <h1>Publication not found</h1>
      </main>
    `;
  }

  const authorStr = pub.authors
    .map(a => a.isSamReynolds ? `<strong>${a.name}</strong>` : a.name)
    .join(', ');

  const doiUrl = `https://doi.org/${pub.doi}`;

  return `
    <main class="${styles.container}">
      <a href="#/" class="${styles.backLink}">&larr; Back to Home</a>
      <article class="${styles.detail}">
        <header class="${styles.detailHeader}">
          <h1 class="${styles.title}">${pub.title}</h1>
          <p class="${styles.authors}">${authorStr}</p>
          <p class="${styles.meta}">
            <span>${pub.journal}</span>
            <span class="${styles.separator}">&middot;</span>
            <span>${pub.year}</span>
          </p>
        </header>
        <section class="${styles.abstract}">
          <h2>Abstract</h2>
          <p>${pub.abstract}</p>
        </section>
        <footer class="${styles.links}">
          <a href="${doiUrl}" class="${styles.primaryLink}" target="_blank" rel="noopener">
            View Publication &rarr;
          </a>
        </footer>
      </article>
    </main>
  `;
}
```

**src/pages/TalkDetail.ts:**
```typescript
import { getTalkById } from '../lib/content';
import styles from './DetailPage.module.css';

export async function renderTalkDetail(id: string): Promise<string> {
  const talk = await getTalkById(id);

  if (!talk) {
    return `
      <main class="${styles.container}">
        <a href="#/" class="${styles.backLink}">&larr; Back</a>
        <h1>Talk not found</h1>
      </main>
    `;
  }

  const date = new Date(talk.date).toLocaleDateString('en-GB', {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });

  let linksHtml = '';
  if (talk.video || talk.slides) {
    const linkItems = [];
    if (talk.video) {
      linkItems.push(`<a href="${talk.video}" class="${styles.primaryLink}" target="_blank" rel="noopener">Watch Video &rarr;</a>`);
    }
    if (talk.slides) {
      linkItems.push(`<a href="${talk.slides}" class="${styles.secondaryLink}" target="_blank" rel="noopener">View Slides</a>`);
    }
    linksHtml = `<footer class="${styles.links}">${linkItems.join('')}</footer>`;
  }

  return `
    <main class="${styles.container}">
      <a href="#/" class="${styles.backLink}">&larr; Back to Home</a>
      <article class="${styles.detail}">
        <header class="${styles.detailHeader}">
          <h1 class="${styles.title}">${talk.title}</h1>
          <p class="${styles.meta}">
            <span>${talk.venue}</span>
            <span class="${styles.separator}">&middot;</span>
            <span>${date}</span>
          </p>
        </header>
        ${linksHtml}
      </article>
    </main>
  `;
}
```

**src/pages/MediaDetail.ts:**
```typescript
import { getMediaById } from '../lib/content';
import styles from './DetailPage.module.css';

export async function renderMediaDetail(id: string): Promise<string> {
  const media = await getMediaById(id);

  if (!media) {
    return `
      <main class="${styles.container}">
        <a href="#/" class="${styles.backLink}">&larr; Back</a>
        <h1>Media not found</h1>
      </main>
    `;
  }

  const date = new Date(media.date).toLocaleDateString('en-GB', {
    year: 'numeric',
    month: 'long',
  });
  const typeLabel = media.type.charAt(0).toUpperCase() + media.type.slice(1);

  let linkHtml = '';
  if (media.link) {
    linkHtml = `
      <footer class="${styles.links}">
        <a href="${media.link}" class="${styles.primaryLink}" target="_blank" rel="noopener">
          View ${typeLabel} &rarr;
        </a>
      </footer>
    `;
  }

  return `
    <main class="${styles.container}">
      <a href="#/" class="${styles.backLink}">&larr; Back to Home</a>
      <article class="${styles.detail}">
        <header class="${styles.detailHeader}">
          <span class="${styles.badge}">${typeLabel}</span>
          <h1 class="${styles.title}">${media.title}</h1>
          <p class="${styles.meta}">
            <span>${media.venue}</span>
            <span class="${styles.separator}">&middot;</span>
            <span>${date}</span>
          </p>
        </header>
        <section class="${styles.description}">
          <p>${media.description}</p>
        </section>
        ${linkHtml}
      </article>
    </main>
  `;
}
```
  </action>
  <verify>
```bash
npx tsc --noEmit
```
Each detail page renders with correct content, shows not found for invalid IDs.
  </verify>
  <done>
Detail pages render publication (with abstract, DOI link), talk (with video/slides if available), media (with description, link if available).
  </done>
</task>

</tasks>

<verification>
1. Run `npx tsc --noEmit` - no TypeScript errors
2. Test HomePage rendering:
   - All 5 sections present (About, Research, Publications, Talks, Media)
   - 15 publication cards visible
   - 19 talk cards visible
   - 12 media cards visible
   - Content sorted by date (most recent first)
3. Test detail pages with valid and invalid IDs:
   - PublicationDetail shows abstract and DOI link
   - TalkDetail shows video/slides links when available
   - MediaDetail shows description and external link
   - All show "not found" for invalid IDs
   - Back link returns to home
</verification>

<success_criteria>
- [ ] Home page renders all 5 sections
- [ ] About section shows name, bio, education, contact links
- [ ] Research section displays all 6 topics with descriptions
- [ ] Publications section has 15 cards in chronological order
- [ ] Talks section has 19 cards in chronological order
- [ ] Media section has 12 cards in chronological order
- [ ] Publication detail shows authors (Sam bold), abstract, DOI link
- [ ] Talk detail shows venue, date, video/slides when available
- [ ] Media detail shows type badge, description, external link
- [ ] Invalid IDs show "not found" message with back link
- [ ] All TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/03-website-mode/03-03-SUMMARY.md`
</output>
